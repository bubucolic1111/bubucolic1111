name: æ¯æ—¥æ‰“å¡è‡ªå‹•å»ºç«‹

on:
  schedule:
    - cron: '0 1 * * *'  # æ¯å¤©å°ç£æ™‚é–“ä¸Šåˆ9é» (GitHub Actions æ™‚å€ç‚º UTC)
  workflow_dispatch:      # æ‰‹å‹•å•Ÿå‹•åŠŸèƒ½

jobs:
  create_daily_checkin:
    runs-on: ubuntu-latest
    steps:
      - name: è¨ˆç®—ä»Šå¤©æ—¥æœŸèˆ‡ TOEIC å€’æ•¸
        id: vars
        run: |
          today=$(TZ=Asia/Taipei date +'%Y-%m-%d')
          exam_date="2025-07-27"
          days_left=$(( ( $(date -d "$exam_date" +%s) - $(date +%s) ) / 86400 ))
          echo "today=$today" >> $GITHUB_OUTPUT
          echo "days_left=$days_left" >> $GITHUB_OUTPUT

      - name: å»ºç«‹æ¯æ—¥æ‰“å¡ Issue
        uses: peter-evans/create-issue@v5
        with:
          title: "æ‰“å¡æ—¥ï¼š${{ steps.vars.outputs.today }}ï¼ˆå€’æ•¸ ${{ steps.vars.outputs.days_left }} å¤©ï¼‰"
          labels: ä»»å‹™æ‰“å¡
          body: |
            ### ğŸ—“ï¸ æ‰“å¡æ—¥ï¼š${{ steps.vars.outputs.today }}
            ### â³ TOEIC å€’æ•¸ï¼š${{ steps.vars.outputs.days_left }} å¤©

            ---

            ## âœ… ä»Šå¤©åšäº†ä»€éº¼ï¼Ÿ

            - [ ] ğŸ“˜ æˆ‘æœ‰å­¸è‹±æ–‡
            - [ ] ğŸ’» æˆ‘åœ¨ GitHub å­¸åˆ°ä¸€ä»¶äº‹
            - [ ] â³ æˆ‘æŸ¥çœ‹äº† TOEIC å€’æ•¸å¤©æ•¸

            ---

            ## ğŸ“ æ¨è–¦ç¾é£Ÿ / æ™¯é»ï¼ˆæ­¡è¿ç•™è¨€ï¼ï¼‰

            - ğŸœ åç¨±ï¼š
            - ğŸ“ åœ°é»ï¼š
            - ğŸ’¬ è©•èªï¼š
